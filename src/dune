(executable
 (name netflix)
 (modules netflix)
 (modes js)
 (js_of_ocaml
  (flags --opt 3 --target-env browser))
 (libraries js_of_ocaml js_of_ocaml-lwt lwt lib)
 (preprocess (pps js_of_ocaml-ppx))
)

(executable
 (name popup)
 (modules popup)
 (modes js)
 (js_of_ocaml
  (flags --opt 3 --source-map --target-env browser))
 (libraries js_of_ocaml lib)
 (preprocess (pps js_of_ocaml-ppx))
)

(library
 (name        lib)
 (modules     omdb storage chrome plugin log)
 (libraries js_of_ocaml js_of_ocaml-lwt lwt unix)
 (js_of_ocaml
  (flags --opt 3 --source-map --target-env browser))
 (preprocess (pps js_of_ocaml-ppx ppx_deriving_yojson))
)
